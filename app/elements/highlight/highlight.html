<polymer-element name="highlight-element" attributes="page nextpage previouspage fullmode">
<template>
  <link rel="stylesheet" href="highlight.css"> 
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

<div layout horizontal fit>
        <core-animated-pages id="pages" flex on-core-animated-pages-transition-end="{{transitionend}}" transitions="cross-fade-all hero-transition">
          <section vertical layout>
            <div id="container" flex horizontal wrap around-justified layout hero-p>
              <template repeat="{{item in items}}">
                <div class="card" vertical center center-justified layout hero-id="item-{{item}}" hero?="{{$.pages.selected === item + 1 || lastSelected === item + 1}}" on-tap="{{selectView}}"><span cross-fade>{{item}}</span></div>
              </template>
              <footer-element id="footerYo"></footer-element>
            </div>
          </section>

      <template repeat="{{item in items}}">
        <section vertical layout>
          <div class="view" flex vertical center center-justified layout hero-id="item-{{item}}" hero?="{{$.pages.selected === item + 1 || $.pages.selected === 0}}"><span cross-fade>{{item}}</span>
          <core-icon-button icon="{{$.pages.selected != 0 ? 'arrow-back' : 'menu'}}" on-tap="{{back}}"></core-icon-button>
          </div>
        </section>
      </template>
      </core-animated-pages>
      </div>

</template>

<script>
  Polymer('highlight-element', {
    items : [],
    ready: function(){
        var count = 50;
for (var i=0; i < count; i++) {
        this.items.push(i);
      };
    },
    fullmodeChanged : function(){

        if(! (this.fullmode[0] === 'highlights' && this.fullmode[1] === '2014' )){
            return;
        }
        window.console.log(this.fullmode);

        if(this.fullmode.length < 3){
            this.back();
        }
        else{
            this.$.pages.selected = parseInt(this.fullmode[3]) + 1;
        }

    },
    previouspageChanged : function(){
this.$.footerYo.previous = this.previouspage;
    },
        nextpageChanged : function(){
this.$.footerYo.next = this.nextpage;
    },
          selectView : function(e) {
            window.console.log('SELECTING...!!!');
        var i = e.target.templateInstance.model.item;
        this.$.pages.selected = i+1;
        // save history...
        window.location.href = '#highlights/2014/full/' + i;
        
      },
            back : function() {
                window.console.log('BACKING...!!!');
        
        this.lastSelected = this.$.pages.selected;
        this.$.pages.selected = 0;
        // save history...
        window.location.href = '#highlights/2014';
      }
  });
</script>
</polymer-element>